% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main_interface.R
\name{fscores}
\alias{fscores}
\title{Calculate Factor Scores Using IRT Model}
\usage{
fscores(
  data,
  item_params,
  person_id_col = "person_id",
  covariate_cols = NULL,
  method = "map",
  weights = NULL,
  ...
)
}
\arguments{
\item{data}{Data frame in wide format with one row per person. Columns should
include a person ID column, optional covariate columns, and item response columns.}

\item{item_params}{Named list of item parameters. Each element should be a list
containing:
\describe{
\item{loadings}{Numeric vector of length K (number of dimensions)}
\item{thresholds}{Numeric vector of thresholds (length = n_categories - 1)}
}}

\item{person_id_col}{Name of the column containing person IDs (default: "person_id")}

\item{covariate_cols}{Optional character vector of column names to use as covariates}

\item{method}{Estimation method (see \code{\link{fit_ability}} for options)}

\item{weights}{Optional vector of person weights}

\item{...}{Additional arguments passed to \code{\link{fit_ability}}}
}
\value{
Object of class "irt_fit"
}
\description{
User-friendly function that accepts data in wide format (one row per person)
and returns IRT ability scores. Provides an interface similar to \code{mirt::fscores()}.
}
\details{
\strong{CRITICAL: Response values must be 0-indexed!}

Item responses must start at 0, not 1. For an item with 3 categories,
valid responses are 0, 1, 2 (not 1, 2, 3).

\strong{Threshold specification:}

Thresholds define boundaries between categories:
\itemize{
\item Category 0: (-Inf, threshold[1]]
\item Category 1: (threshold[1], threshold[2]]
\item Category 2: (threshold[2], Inf)
}

For k+1 categories (0 through k), you need k thresholds.

\strong{Validation:}

The function validates:
\itemize{
\item Response values are >= 0 (0-indexed)
\item Sufficient thresholds provided for observed responses
\item All items have parameter specifications
}
}
\examples{
\dontrun{
# Create wide format data (responses are 0-indexed!)
wide_data <- data.frame(
  person_id = 1:100,
  age = rnorm(100, 30, 10),
  item1 = sample(0:2, 100, replace = TRUE),  # 0-indexed!
  item2 = sample(0:2, 100, replace = TRUE)   # 0-indexed!
)

# Define item parameters
item_params <- list(
  item1 = list(
    loadings = c(1.2, 0.1),
    thresholds = c(-1, 0.5)  # 2 thresholds for 3 categories
  ),
  item2 = list(
    loadings = c(0.8, 1.5),
    thresholds = c(-0.5, 1.0)
  )
)

# Fit model
fit <- fscores(
  data = wide_data,
  item_params = item_params,
  person_id_col = "person_id",
  covariate_cols = "age",
  method = "map"
)

# Extract ability scores
theta <- fit$theta
}

}
